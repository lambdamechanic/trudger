{"id":"tr-0lw","title":"Add trudger automation script","description":"Goal: deliver a root-level ./trudger script that loops over ready trudgeable bd tasks and drives Codex solve+review sessions with deterministic task closure or requires-human escalation. Scope: prompt file presence checks, bd task selection, codex exec orchestration, bd state updates, and error handling. Out of scope: parallel task processing or general task runner framework.","acceptance_criteria":"- ./trudger is executable and starts without explicit shell invocation.\n- Missing ~/.codex/prompts/trudge or ~/.codex/prompts/trudge_review causes a clear startup error.\n- Lowest-priority ready trudgeable task is selected per loop; exits 0 when none remain.\n- Codex exec and resume are invoked with /prompt:trudge <id> and /prompt:trudge_review <id>.\n- On review success, bd task is closed and trudgeable removed; on requires-human, comment/notes updated, trudgeable removed, requires-human added.\n- If neither close nor requires-human occurs after review, script exits non-zero.","status":"closed","priority":2,"issue_type":"epic","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:20.188896676Z","created_by":"Mark","updated_at":"2026-01-26T04:10:30.211124533Z","closed_at":"2026-01-26T04:10:30.211124533Z","close_reason":"Closed","compaction_level":0}
{"id":"tr-0lw.1","title":"Scaffold ./trudger and prompt file checks","description":"OpenSpec add-trudger requirements: (1) 'The system SHALL provide a root-level executable script named ...' Scenario: WHEN a user runs ./trudger THEN the script starts without requiring an explicit shell invocation. (2) 'The script SHALL verify that ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review exist...' Scenario: GIVEN missing prompt files WHEN ./trudger starts THEN it exits with a clear error indicating the missing path.","acceptance_criteria":"Outputs: root-level ./trudger script with executable permissions and usage header; startup check for ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review. Validation/tests: run ./trudger to confirm direct execution works; simulate missing prompt file(s) and confirm clear error message and non-zero exit. Success: script is executable and fails fast with explicit missing-path error.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:27.533863764Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.356595171Z","closed_at":"2026-01-26T04:10:27.356595171Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.1","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:27.534745566Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.2","title":"Implement bd task selection loop","description":"OpenSpec requirement: The script SHALL select the lowest-priority ready bd task with the trudgeable label and process one task per outer loop iteration. Scenario: WHEN no ready tasks with label trudgeable are found THEN the script exits with status 0.","acceptance_criteria":"Outputs: bd query uses bd ready ordering for trudgeable tasks; lowest priority per bd ordering; loop handles one task at a time; exit 0 when none remain. Validation/tests: run against bd with zero trudgeable tasks to confirm exit 0; run with multiple trudgeable tasks to confirm bd ordering. Success: selection ordering matches bd ready output (open qualifies).","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:36.396621595Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.370709867Z","closed_at":"2026-01-26T04:10:27.370709867Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:36.397481786Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:36.398715608Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.3","title":"Wire Codex exec + review prompts","description":"OpenSpec requirement: For each selected task, the script SHALL start a Codex exec session with /prompt:trudge <bd-id> and then resume the same session with /prompt:trudge_review <bd-id>. Scenario: WHEN a task is selected THEN the script invokes codex exec with /prompt:trudge <bd-id> AND codex exec resume --last with /prompt:trudge_review <bd-id>.","acceptance_criteria":"Outputs: codex exec invocation and resume of same session for review (resume --last or equivalent). Validation/tests: verify codex exec called with /prompt:trudge <id> and resume with /prompt:trudge_review <id>; failures abort immediately. Success: two-step Codex flow runs per task with correct prompts; non-zero on exec failure.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:42.271318250Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.377459994Z","closed_at":"2026-01-26T04:10:27.377459994Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:42.272414531Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:42.273789681Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.4","title":"Apply bd updates after Codex review","description":"OpenSpec requirements: (1) When review indicates acceptance, close bd task and remove trudgeable. Scenario: WHEN Codex review reports acceptance criteria satisfied THEN the bd task is closed and trudgeable removed. (2) When review indicates human input required, add bd comment, update notes, remove trudgeable, add requires-human. Scenario: WHEN Codex review reports that human input is required THEN task receives comment/notes update AND trudgeable removed AND requires-human added. (3) After review, verify task was closed or labeled requires-human (with trudgeable removed) and exit non-zero if neither. Scenario: WHEN review completes without closing or requires-human THEN script exits non-zero.","acceptance_criteria":"Outputs: on review completion, inspect bd task; if closed, remove trudgeable; if requires-human label present, add comment/notes, remove trudgeable, add requires-human. Validation/tests: simulate review success and verify bd task is closed; simulate requires-human response and verify labels/comment/notes; simulate missing close or requires-human and verify non-zero exit. Success: bd state reflects review outcome; script errors if neither close nor requires-human.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:52.312225142Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.384901343Z","closed_at":"2026-01-26T04:10:27.384901343Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:52.313358701Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:55:10.150781719Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:52.314904619Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:52.316193734Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.5","title":"Validate trudger behavior with mock tasks","description":"OpenSpec scenarios covered: WHEN no ready trudgeable tasks are found THEN script exits 0; GIVEN missing prompt files WHEN ./trudger starts THEN clear error; WHEN task selected THEN codex exec and resume prompts invoked; WHEN review outcome applied THEN bd state updates or non-zero exit if missing.","acceptance_criteria":"Outputs: documented run evidence (logs/notes) for task selection, prompt checks, codex flow, and bd updates. Validation/tests: run a real codex session with a mock trudgeable task; confirm exit 0 when none remain; confirm missing prompts error; confirm bd updates on success/requires-human. Success: all scenarios in add-trudger change demonstrate expected behavior.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:58.000611480Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.392355885Z","closed_at":"2026-01-26T04:10:27.392355885Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:58.001959141Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:58.004012021Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:58.006003714Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:58.008106675Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.4","type":"blocks","created_at":"2026-01-26T03:25:58.010160509Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-131","title":"Add trudger.yml configuration + hooks","description":"OpenSpec: openspec/changes/add-trudger-config\n\nGoals:\n- Read ~/.config/trudger.yml (warn if missing) to configure:\n  - Codex invocation command line\n  - Next-task selection command\n  - Optional hooks when a task completes or needs human approval\n  - Optional label names (trudgeable / requires-human) used only when hooks are not configured\n- Remove TRUDGER_* environment-variable configuration.\n\nScope:\n- Update ./trudger behavior to be config-driven.\n- Update tests to cover config + hooks.\n- Update docs as needed to explain configuration.\n\nOut of scope:\n- Changing bd or Codex behavior.\n- Changing prompt contents beyond existing $ARGUMENTS substitution.","acceptance_criteria":"- Config file: trudger reads ~/.config/trudger.yml on startup; if missing, prints a warning and continues with defaults.\n- No env config: TRUDGER_* environment variables are not used for configuration.\n- Task selection: uses configured next-task command (first whitespace-delimited token of stdout) or defaults to bd ready selection with optional trudgeable filtering.\n- Codex invocation: uses configured Codex command line for solve, and the same with `resume --last` for review.\n- Hooks: if configured, executes hooks as `<command> <task_id> <extra args...>` for completed and requires-human outcomes.\n- Labels optional: trudgeable/requires-human labels are configurable and optional; default label behavior applies only when hooks are not configured.\n- Verification: after review, trudger exits non-zero if neither closed nor requires-human condition is detected.\n- Validation: `bats tests/trudger_test.bats` passes; `openspec validate add-trudger-config --strict --no-interactive` passes.","status":"closed","priority":2,"issue_type":"epic","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.595618681Z","created_by":"Mark Wotton","updated_at":"2026-01-27T10:00:18.545671438Z","closed_at":"2026-01-27T10:00:18.545671438Z","close_reason":"Closed","compaction_level":0,"labels":["trudgeable"]}
{"id":"tr-131.1","title":"Load ~/.config/trudger.yml + defaults","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n    - Scenario: Config missing\n    - Scenario: Env vars ignored\n\nWork:\n- Define config keys + defaults needed to drive trudger behavior (Codex command, next-task command, hooks, labels, review loop limit, log path).\n- Implement reading ~/.config/trudger.yml at startup; if missing, emit a warning (stderr) and continue with defaults.\n- Implement YAML parsing sufficient for the chosen schema.\n\nExpected outputs:\n- ./trudger loads config and exposes values to the rest of the script.\n- Missing config produces a clear warning without failing.\n\nValidation/tests:\n- Add bats coverage for missing config warning + default behavior.\n\nSuccess:\n- `trudger` runs with no config (warns once) and preserves default behavior.","acceptance_criteria":"- Config loader exists and is used by ./trudger.\n- Missing ~/.config/trudger.yml prints a warning but exits 0 when no tasks.\n- Tests demonstrate warning + defaults.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.637292067Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:26:17.660059069Z","closed_at":"2026-01-28T02:26:17.660059069Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.1","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.638996521Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.2","title":"Remove TRUDGER_* configuration env vars","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n    - Scenario: Env vars ignored\n\nWork:\n- Remove TRUDGER_LOG / TRUDGER_NEXT_CMD / TRUDGER_REVIEW_LOOPS (and any other TRUDGER_* config) as configuration inputs.\n- Ensure any remaining TRUDGER_* values are internal-only state, not user config.\n\nExpected outputs:\n- ./trudger behavior is driven by config file defaults/values, not TRUDGER_* env vars.\n\nValidation/tests:\n- Add a bats test that sets TRUDGER_NEXT_CMD/TRUDGER_REVIEW_LOOPS and verifies behavior does not change unless config changes.\n\nSuccess:\n- Env vars no longer affect configuration.","acceptance_criteria":"- No TRUDGER_* env vars are read for configuration.\n- Tests cover at least one env var being ignored.","notes":"2026-01-28: Updated bats env-var test to set TRUDGER_REVIEW_LOOPS=0 alongside TRUDGER_NEXT_CMD; verified config ignores env vars. Ran: bats tests/trudger_test.bats, shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.692454937Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:44:21.885636925Z","closed_at":"2026-01-28T02:44:21.885636925Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.2","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.694228582Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.2","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.696546147Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.3","title":"Configure Codex invocation via config","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Codex prompt execution\n    - Scenario: Configured Codex command\n\nWork:\n- Read `codex_command` from config.\n- Use it for the solve step, and use the same command line with `resume --last` appended for the review step.\n\nExpected outputs:\n- ./trudger invokes Codex via the configured command string for both solve and review.\n\nValidation/tests:\n- Add bats coverage asserting the configured codex command is used (fixture codex log).\n\nSuccess:\n- Codex invocations match the configured command line for both phases.","acceptance_criteria":"- Configurable `codex_command` drives solve + review invocations.\n- Tests assert the command used.","notes":"2026-01-28: Verified codex_command from config drives solve and review (appends resume --last). Ran: bats tests/trudger_test.bats; TRUDGER_TEST_RUN_CODEX=1 bats -f 'uses configured codex command for solve and review' tests/trudger_test.bats; shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.750301428Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:58:16.300919686Z","closed_at":"2026-01-28T02:58:16.300919686Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.3","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.751906268Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.3","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.754284489Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.4","title":"Configure next-task selection via config","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Task selection\n    - Scenario: Custom next-task command\n\nWork:\n- Read `next_task_command` from config.\n- Execute it to select the next task id, using the first whitespace-delimited token of stdout.\n- If `next_task_command` is not configured, use the default bd-ready query, filtering by the configured trudgeable label when set.\n\nExpected outputs:\n- ./trudger selects tasks using the configured command and parsing rules.\n\nValidation/tests:\n- Add bats coverage for:\n  - Custom command returning an id\n  - Custom command returning empty -> exits 0 (no task)\n  - Default bd selection still works with label filtering\n\nSuccess:\n- Task selection follows config rules and is covered by tests.","acceptance_criteria":"- next-task selection uses `next_task_command` when set, otherwise defaults.\n- Tests cover parsing + fallback behavior.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.807784351Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:15:10.353568707Z","closed_at":"2026-01-28T03:15:10.353568707Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.4","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.809509331Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.4","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.811929987Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.5","title":"Add completion hook (on_completed) + fallback label behavior","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Task closure on success\n    - Scenario: Completion hook configured\n    - Scenario: No completion hook\n\nWork:\n- Add config for optional completion hook.\n- Execute the hook as `<command> <task_id> <extra args...>` when a task is closed.\n- If no completion hook is configured, remove the configured trudgeable label when it is set.\n\nExpected outputs:\n- ./trudger runs completion hook with task id as first argument.\n- Default label removal occurs only when hook is not configured.\n\nValidation/tests:\n- Add bats coverage using a fixture hook script to assert argv ordering.\n\nSuccess:\n- Closed tasks trigger the hook (or fallback label removal) per config.","acceptance_criteria":"- on_completed hook is invoked as `<cmd> <task_id> <extras>` when configured.\n- Fallback label removal works when hook is absent.\n- Tests cover both paths.","notes":"2026-01-28: Verified on_completed hook runs as <cmd> <task_id> <extras> and skips label removal; fallback label removal works when no hook. Ran: bats tests/trudger_test.bats; TRUDGER_TEST_RUN_CODEX=1 bats tests/trudger_test.bats; shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.867079473Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:25:19.055159742Z","closed_at":"2026-01-28T03:25:19.055159742Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.5","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.868861189Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.5","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.871236880Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.6","title":"Add requires-human hook (on_requires_human) + optional labels","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Requires-human escalation\n    - Scenario: Requires-human hook configured\n    - Scenario: No requires-human hook\n\nWork:\n- Add config for optional requires-human hook.\n- Execute the hook as `<command> <task_id> <extra args...>` when requires-human is detected.\n- If no hook is configured, apply label updates using configured label names (both optional).\n\nExpected outputs:\n- ./trudger can operate with labels disabled (no trudgeable/requires-human labels configured) when hooks are configured.\n\nValidation/tests:\n- Add bats coverage for:\n  - Hook invocation and argv ordering\n  - Label fallback behavior when hook is absent\n  - Behavior when label names are unset/empty\n\nSuccess:\n- Requires-human handling matches the configured hook/label strategy and is tested.","acceptance_criteria":"- on_requires_human hook is invoked as `<cmd> <task_id> <extras>` when configured.\n- Label fallback behavior works when hook is absent.\n- Labels can be disabled via config when hooks are present.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.925853480Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:31:59.775714186Z","closed_at":"2026-01-28T03:31:59.775714186Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.6","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.927792355Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.6","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.930450739Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.7","title":"Update bats tests for config-driven behavior","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file (scenarios: Config missing, Env vars ignored)\n  - Requirement: Task selection (scenario: Custom next-task command)\n  - Requirement: Codex prompt execution (scenario: Configured Codex command)\n  - Requirement: Task closure on success (scenarios: Completion hook configured / No completion hook)\n  - Requirement: Requires-human escalation (scenarios: Requires-human hook configured / No requires-human hook)\n  - Requirement: Codex update verification (scenario: Missing update is an error)\n\nWork:\n- Update `tests/trudger_test.bats` and fixtures to use config file instead of TRUDGER_* env vars.\n- Add new fixtures/scripts as needed to assert hook argv ordering and next-task command behavior.\n\nExpected outputs:\n- New/updated bats tests covering config loading, codex command, task selection, hooks, and verification.\n\nValidation/tests:\n- `bats tests/trudger_test.bats`\n\nSuccess:\n- Test suite passes and covers the new config-driven acceptance criteria.","acceptance_criteria":"- Bats tests updated/added to cover config + hooks.\n- All tests pass locally.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.984747492Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:36:57.719086798Z","closed_at":"2026-01-28T03:36:57.719086798Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.7","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.986638153Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.2","type":"blocks","created_at":"2026-01-27T09:26:35.989317341Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.3","type":"blocks","created_at":"2026-01-27T09:26:35.991873342Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.4","type":"blocks","created_at":"2026-01-27T09:26:35.994566446Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.5","type":"blocks","created_at":"2026-01-27T09:26:35.997203746Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.6","type":"blocks","created_at":"2026-01-27T09:26:35.999708932Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.8","title":"Run quality gates + update docs","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n\nWork:\n- Update README/install guidance to document ~/.config/trudger.yml and available config keys.\n- Run validation commands and record results in the PR/notes.\n\nExpected outputs:\n- Docs clearly describe configuration and defaults.\n\nValidation/tests:\n- `openspec validate add-trudger-config --strict --no-interactive`\n- `bats tests/trudger_test.bats`\n\nSuccess:\n- Validation passes; docs match implemented behavior.","acceptance_criteria":"- Docs updated to describe config and defaults.\n- openspec + bats validation passes.","notes":"Validation:\\n- openspec validate add-trudger-config --strict --no-interactive (pass)\\n- bats tests/trudger_test.bats (pass)","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:36.054519306Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:41:19.360356219Z","closed_at":"2026-01-28T03:41:19.360356219Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.8","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:36.056245843Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.8","depends_on_id":"tr-131.7","type":"blocks","created_at":"2026-01-27T09:26:36.058726235Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-140","title":"Consolidate specs and update trudger purpose section","description":"OpenSpec refs:\n- Requirement: Configuration loading/validation/parsing/unknown keys\n- Requirement: Hook execution semantics\n- Requirement: Task selection, review hooks, and status verification\n\nExpected outputs:\n- Remove duplicate spec copies under completed changes; keep a single canonical spec source.\n- Update `openspec/specs/trudger/spec.md` Purpose section to describe the generic task system (with br/bd as examples), removing label-specific language.\n- Ensure canonical spec reflects the added/modified requirements from this change.\n\nValidation/tests:\n- `openspec validate refactor-trudger-config-and-docs --strict --no-interactive` should pass once all spec/docs updates are done.\n\nSuccess criteria:\n- Spec sources are consolidated and purpose text matches the current system behavior.\n\nNotes:\n- This task is blocked on archiving `add-trudger-config-flag` (per change proposal dependency).","acceptance_criteria":"Acceptance criteria: (1) Duplicate spec copies under completed changes are removed. (2) Purpose section is updated to describe the generic task system. (3) Canonical spec still contains the added/modified requirements for this change.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:26:50.124425450Z","created_by":"mark","updated_at":"2026-01-29T09:19:35.934116782Z","closed_at":"2026-01-29T09:19:35.934046891Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-140","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:26:50.149750531Z","created_by":"mark"}]}
{"id":"tr-1e1","title":"Test sample configs with br","description":"Add coverage for both sample configs, including robot-triage using bv stub, and ensure br workflow works in tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T13:21:40.335760004Z","created_by":"mark","updated_at":"2026-01-28T13:22:30.666716310Z","closed_at":"2026-01-28T13:22:30.666653281Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"tr-1e5","title":"Investigate --robot-next selecting in_progress task","description":"Running ../trudger/trudger from /home/mark/lambdalabs/tooltest returns: 'Task tooltest-ev5 is not ready (status: in_progress)'. Expected robot-next to avoid in_progress tasks; investigate config or trudger selection logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T02:16:58.269747706Z","created_by":"mark","updated_at":"2026-01-29T03:52:28.331064395Z","closed_at":"2026-01-29T03:52:28.331019276Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"tr-1hl","title":"Ensure sample configuration files are present","description":"OpenSpec refs:\n- Requirement: Sample config files — Scenario: sample configs available in repo\n\nExpected outputs:\n- `sample_configuration/trudgeable-with-hooks.yml` exists (legacy/default behavior).\n- `sample_configuration/robot-triage.yml` exists (`bv --robot-triage` task selection).\n\nValidation/tests:\n- Repository contents verified (manual or via test fixture references).\n\nSuccess criteria:\n- Both sample config files are present and usable for copy/adaptation.","acceptance_criteria":"Acceptance criteria: (1) sample_configuration/trudgeable-with-hooks.yml exists in the repo. (2) sample_configuration/robot-triage.yml exists in the repo.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T06:05:15.132814137Z","created_by":"mark","updated_at":"2026-01-29T10:11:13.785284184Z","closed_at":"2026-01-29T10:11:13.785239433Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-1hl","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:05:15.162082088Z","created_by":"mark"}]}
{"id":"tr-1ta","title":"Align task selection and review hooks with spec","description":"OpenSpec refs:\n- Requirement: Task selection — Scenario: No selectable tasks\n- Requirement: Task selection — Scenario: Task not ready is skipped\n- Requirement: Task closure on success — Scenario: Task closed after successful review\n- Requirement: Requires-human escalation — Scenario: Task still open after review\n- Requirement: Codex update verification — Scenario: Missing status after review\n\nExpected outputs:\n- `commands.next_task` empty or exit 1 => script exits 0.\n- Not-ready task is skipped and retried up to `TRUDGER_SKIP_NOT_READY_LIMIT` before idling.\n- After review, task status must be non-empty; missing status => non-zero exit.\n- Status closed => run `hooks.on_completed`; otherwise run `hooks.on_requires_human`.\n- One task is processed per outer loop iteration.\n\nValidation/tests:\n- Covered by new/updated BATS cases in the \"Extend tests\" task.\n\nSuccess criteria:\n- Task selection and review hook behavior matches OpenSpec scenarios.","acceptance_criteria":"Acceptance criteria: (1) Empty/exit-1 commands.next_task results in exit status 0. (2) Not-ready tasks are skipped with retries up to TRUDGER_SKIP_NOT_READY_LIMIT. (3) Missing/empty status after review exits non-zero. (4) Closed status triggers hooks.on_completed; non-closed triggers hooks.on_requires_human. (5) Only one task is processed per outer loop iteration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:26:01.798809820Z","created_by":"mark","updated_at":"2026-01-29T08:12:31.296294951Z","closed_at":"2026-01-29T08:12:31.296251276Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-1ta","depends_on_id":"tr-2ef","type":"waits-for","created_at":"2026-01-29T05:26:01.829273666Z","created_by":"mark"},{"issue_id":"tr-1ta","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:26:01.824145961Z","created_by":"mark"}]}
{"id":"tr-2ef","title":"Add shared command helper and hook argument substitution","description":"OpenSpec refs:\n- Requirement: Hook execution semantics — Scenario: Hook uses $1 substitution\n- Requirement: Hook execution semantics — Scenario: Hook without substitution\n\nExpected outputs:\n- Shared helper for executing task/hook commands (next_task, task_show, task_update_in_progress, hooks).\n- Hook commands containing `$1` or `${1}` run via a shell with task id as $1.\n- Hook commands without substitution receive task id as first argument.\n\nValidation/tests:\n- Covered by new/updated BATS cases in the \"Extend tests\" task.\n\nSuccess criteria:\n- Hook execution matches spec and the helper is used consistently for task/hook commands.","acceptance_criteria":"Acceptance criteria: (1) Hook command with / executes via shell with task id available as . (2) Hook command without substitution receives task id as first argument. (3) Helper is used for all task/hook command invocations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:25:49.562064640Z","created_by":"mark","updated_at":"2026-01-29T07:55:42.385464533Z","closed_at":"2026-01-29T07:55:42.385399163Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-2ef","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:25:49.571031781Z","created_by":"mark"}]}
{"id":"tr-2mc","title":"Refactor Trudger config parsing, docs, and test helpers","description":"Goals:\n- Align config parsing/validation with spec using yq, required keys, null handling, unknown key warnings, and missing-config bootstrap messaging.\n- Standardize hook execution and task selection/review behaviors to match the updated spec.\n- Reduce duplication by consolidating specs, refactoring tests/fixtures, and updating docs/prompts.\n\nScope:\n- Code: `trudger` script + shared command execution helper.\n- Tests/fixtures: `tests/trudger_test.bats`, `tests/fixtures/bin/*`.\n- Docs/specs: `README.md`, `prompts/*.md`, `openspec/specs/trudger/spec.md`, and removal of duplicate spec copies under `openspec/changes/`.\n\nOpenSpec refs:\n- ADDED: Configuration loading (Scenario: Missing config file)\n- ADDED: Configuration validation (Scenario: Required config value missing)\n- ADDED: Configuration parsing (Scenario: Null config value)\n- ADDED: Unknown config keys (Scenario: Unknown config key)\n- ADDED: Hook execution semantics (Scenario: Hook uses $1 substitution; Scenario: Hook without substitution)\n- MODIFIED: Task selection (Scenario: No selectable tasks; Scenario: Task not ready is skipped)\n- MODIFIED: Task closure on success (Scenario: Task closed after successful review)\n- MODIFIED: Requires-human escalation (Scenario: Task still open after review)\n- MODIFIED: Codex update verification (Scenario: Missing status after review)","acceptance_criteria":"Acceptance criteria: (1) All added/modified OpenSpec requirements listed in the epic are implemented in trudger and reflected in docs/tests. (2) Tests cover each referenced scenario and pass. (3) openspec validate refactor-trudger-config-and-docs --strict --no-interactive succeeds.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-29T05:24:30.328999195Z","created_by":"mark","updated_at":"2026-01-30T01:55:11.583693463Z","closed_at":"2026-01-30T01:55:11.583627637Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"tr-2xy","title":"Centralize base config in tests","description":"OpenSpec refs:\n- Requirement: Configuration loading — Scenario: Missing config file\n- Requirement: Configuration validation — Scenario: Required config value missing\n- Requirement: Configuration parsing — Scenario: Null config value\n\nExpected outputs:\n- Centralized base config setup in `tests/trudger_test.bats` with all required keys.\n- Tests reuse the shared base config to reduce duplication and keep required fields in sync.\n\nValidation/tests:\n- BATS suite passes with shared base config.\n\nSuccess criteria:\n- Test fixtures stay aligned with required config fields and are easier to maintain.","acceptance_criteria":"Acceptance criteria: (1) Base config includes all required keys and non-empty values. (2) Tests reuse the shared base config rather than re-declaring required fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:26:14.048626175Z","created_by":"mark","updated_at":"2026-01-29T09:03:15.335203958Z","closed_at":"2026-01-29T09:03:15.335159913Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-2xy","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:26:14.073885268Z","created_by":"mark"},{"issue_id":"tr-2xy","depends_on_id":"tr-365","type":"waits-for","created_at":"2026-01-29T05:26:14.079065130Z","created_by":"mark"}]}
{"id":"tr-2zt","title":"Update tests to use --config and sample configs","description":"OpenSpec refs:\n- Requirement: Config flag override — Scenario: provided config path used\n- Requirement: Sample config files — Scenario: sample configs available in repo\n\nExpected outputs:\n- Tests that need config use `-c/--config` with files in `sample_configuration/`.\n- Inline config definitions in tests are replaced with sample configs where appropriate.\n\nValidation/tests:\n- `bats tests/trudger_test.bats` passes after updates.\n\nSuccess criteria:\n- Tests consistently rely on the config flag and sample configs, reducing duplication.","acceptance_criteria":"Acceptance criteria: (1) Tests that load config use -c/--config. (2) Sample config files are used instead of inline YAML where possible.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T06:06:02.179922292Z","created_by":"mark","updated_at":"2026-01-30T02:08:59.123375307Z","closed_at":"2026-01-30T02:08:59.123330480Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-2zt","depends_on_id":"tr-1hl","type":"waits-for","created_at":"2026-01-29T06:06:02.187221461Z","created_by":"mark"},{"issue_id":"tr-2zt","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:06:02.184031544Z","created_by":"mark"},{"issue_id":"tr-2zt","depends_on_id":"tr-rg8","type":"waits-for","created_at":"2026-01-29T06:06:02.185632425Z","created_by":"mark"}]}
{"id":"tr-305","title":"probe task","description":"probe","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-29T06:03:28.181049417Z","created_by":"mark","updated_at":"2026-01-29T06:03:42.322989858Z","deleted_at":"2026-01-29T06:03:42.322981732Z","deleted_by":"mark","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0}
{"id":"tr-31i","title":"Add shared queue helpers and update fixtures","description":"OpenSpec refs:\n- Requirement: Task selection — Scenario: No selectable tasks\n- Requirement: Task selection — Scenario: Task not ready is skipped\n\nExpected outputs:\n- Shared queue/fixture helper(s) for `tests/fixtures/bin/*`.\n- Fixtures updated to use shared helpers to simulate task queues consistently.\n\nValidation/tests:\n- BATS suite passes with fixture helper updates.\n\nSuccess criteria:\n- Fixture behavior is consistent and queue setup logic is no longer duplicated.","acceptance_criteria":"Acceptance criteria: (1) Fixture bins use shared queue/fixture helpers. (2) Queue helpers can represent ready/open vs not-ready tasks used in task selection scenarios.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:26:23.141924426Z","created_by":"mark","updated_at":"2026-01-29T09:08:46.236169425Z","closed_at":"2026-01-29T09:08:46.236107779Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-31i","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:26:23.166862367Z","created_by":"mark"},{"issue_id":"tr-31i","depends_on_id":"tr-2xy","type":"waits-for","created_at":"2026-01-29T05:26:23.172009220Z","created_by":"mark"}]}
{"id":"tr-34r","title":"Run BATS test suite","description":"OpenSpec refs:\n- Requirement: Config flag override — Scenario: provided config path used; Scenario: missing config path errors\n- Requirement: Sample config files — Scenario: sample configs available in repo\n\nExpected outputs:\n- `bats tests/trudger_test.bats` completes successfully.\n\nValidation/tests:\n- Run `bats tests/trudger_test.bats`.\n\nSuccess criteria:\n- Test suite exits 0 with all tests passing.","acceptance_criteria":"Acceptance criteria: (1) bats tests/trudger_test.bats exits 0 with all tests passing.","notes":"Acceptance criteria verified: bats tests/trudger_test.bats exits 0 with all tests passing (2026-01-30). Unable to close because dependencies are still open: tr-2zt, tr-htz.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T06:06:27.727815244Z","created_by":"mark","updated_at":"2026-01-30T01:51:53.347772752Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-34r","depends_on_id":"tr-2zt","type":"waits-for","created_at":"2026-01-29T06:06:27.733638122Z","created_by":"mark"},{"issue_id":"tr-34r","depends_on_id":"tr-htz","type":"waits-for","created_at":"2026-01-29T06:06:27.735325410Z","created_by":"mark"},{"issue_id":"tr-34r","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:06:27.732010018Z","created_by":"mark"}]}
{"id":"tr-365","title":"Implement yq-based config loading and validation","description":"OpenSpec refs:\n- Requirement: Configuration loading — Scenario: Missing config file\n- Requirement: Configuration validation — Scenario: Required config value missing\n- Requirement: Configuration parsing — Scenario: Null config value\n- Requirement: Unknown config keys — Scenario: Unknown config key\n\nExpected outputs:\n- `trudger` loads `~/.config/trudger.yml` via `yq`.\n- Missing config file => non-zero exit with bootstrap instructions for sample configs.\n- Missing/empty required keys => non-zero exit naming the field.\n- Null required values => non-zero exit naming the field.\n- Unknown top-level keys => warning + continue startup.\n- Missing `yq` => non-zero exit with clear install/use guidance.\n\nValidation/tests:\n- Covered by new/updated BATS cases in the \"Extend tests\" task.\n\nSuccess criteria:\n- Config parsing/validation matches OpenSpec and errors are explicit and actionable.","acceptance_criteria":"Acceptance criteria: (1) Missing config file prints bootstrap instructions and exits non-zero. (2) Missing/empty required key errors with the field name. (3) Null required value errors with the field name. (4) Unknown top-level key logs a warning and continues. (5) Missing yq errors clearly and exits non-zero.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:24:58.550086753Z","created_by":"mark","updated_at":"2026-01-29T06:18:35.252988311Z","closed_at":"2026-01-29T06:18:35.252943644Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-365","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:24:58.554800546Z","created_by":"mark"}]}
{"id":"tr-3do","title":"Align docs and prompts with config + hook behavior","description":"OpenSpec refs:\n- Requirement: Configuration loading — Scenario: Missing config file\n- Requirement: Configuration validation — Scenario: Required config value missing\n- Requirement: Configuration parsing — Scenario: Null config value\n- Requirement: Unknown config keys — Scenario: Unknown config key\n- Requirement: Hook execution semantics — Scenario: Hook uses $1 substitution; Scenario: Hook without substitution\n- Requirement: Task selection — Scenario: No selectable tasks; Scenario: Task not ready is skipped\n- Requirement: Task closure on success — Scenario: Task closed after successful review\n- Requirement: Requires-human escalation — Scenario: Task still open after review\n- Requirement: Codex update verification — Scenario: Missing status after review\n\nExpected outputs:\n- `README.md` and `prompts/*.md` updated to document config path, required keys, `yq` dependency, unknown key warnings, hook semantics, review hook outcomes, status validation, and task selection behavior.\n\nValidation/tests:\n- Manual doc review for alignment with spec (no automated tests).\n\nSuccess criteria:\n- Docs accurately reflect the updated spec-driven behavior and config requirements.","acceptance_criteria":"Acceptance criteria: (1) README/prompts mention ~/.config/trudger.yml, required keys, and the yq dependency. (2) Docs explain unknown key warnings and hook argument/substitution rules. (3) Docs describe task selection outcomes and review hook behavior (completed vs requires human).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:26:39.110993238Z","created_by":"mark","updated_at":"2026-01-29T09:14:09.574087980Z","closed_at":"2026-01-29T09:14:09.574042590Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-3do","depends_on_id":"tr-1ta","type":"waits-for","created_at":"2026-01-29T05:26:39.118214886Z","created_by":"mark"},{"issue_id":"tr-3do","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:26:39.115214224Z","created_by":"mark"},{"issue_id":"tr-3do","depends_on_id":"tr-365","type":"waits-for","created_at":"2026-01-29T05:26:39.116680550Z","created_by":"mark"}]}
{"id":"tr-3ul","title":"Document config flag and sample configs","description":"OpenSpec refs:\n- Requirement: Config flag override — Scenario: provided config path used\n- Requirement: Sample config files — Scenario: sample configs available in repo\n\nExpected outputs:\n- `README.md` documents `-c/--config` usage and that it overrides the default path.\n- `README.md` references both sample configuration files and their purposes.\n\nValidation/tests:\n- Manual doc review for alignment with OpenSpec behavior.\n\nSuccess criteria:\n- Docs clearly instruct how to use the flag and where to find sample configs.","acceptance_criteria":"Acceptance criteria: (1) README explains -c/--config override behavior. (2) README lists both sample configuration files and intended usage.","notes":"Ready to close: README documents -c/--config override and sample configs; bats tests passed (bats tests/trudger_test.bats). bd close failed with parent-blocked (tr-jyr).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T06:05:52.433639948Z","created_by":"mark","updated_at":"2026-01-30T01:58:46.172910001Z","closed_at":"2026-01-30T01:58:46.172859046Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-3ul","depends_on_id":"tr-1hl","type":"waits-for","created_at":"2026-01-29T06:05:52.441561070Z","created_by":"mark"},{"issue_id":"tr-3ul","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:05:52.438003805Z","created_by":"mark"},{"issue_id":"tr-3ul","depends_on_id":"tr-rg8","type":"waits-for","created_at":"2026-01-29T06:05:52.439767840Z","created_by":"mark"}]}
{"id":"tr-gk1","title":"Run OpenSpec validation for the change","description":"OpenSpec refs:\n- All added/modified requirements in `openspec/changes/refactor-trudger-config-and-docs/specs/trudger/spec.md`.\n\nExpected outputs:\n- `openspec validate refactor-trudger-config-and-docs --strict --no-interactive` runs cleanly.\n\nValidation/tests:\n- Run the validation command and capture a zero exit status.\n\nSuccess criteria:\n- No OpenSpec validation errors or warnings.","acceptance_criteria":"Acceptance criteria: (1) openspec validate refactor-trudger-config-and-docs --strict --no-interactive exits 0 with no errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:27:14.167430530Z","created_by":"mark","updated_at":"2026-01-29T09:28:20.349419646Z","closed_at":"2026-01-29T09:28:20.349375662Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-gk1","depends_on_id":"tr-140","type":"waits-for","created_at":"2026-01-29T05:27:14.201633362Z","created_by":"mark"},{"issue_id":"tr-gk1","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:27:14.198199128Z","created_by":"mark"},{"issue_id":"tr-gk1","depends_on_id":"tr-3do","type":"waits-for","created_at":"2026-01-29T05:27:14.199895517Z","created_by":"mark"},{"issue_id":"tr-gk1","depends_on_id":"tr-u0t","type":"waits-for","created_at":"2026-01-29T05:27:14.203315388Z","created_by":"mark"}]}
{"id":"tr-htz","title":"Add BATS coverage for --config override","description":"OpenSpec refs:\n- Requirement: Config flag override — Scenario: provided config path used\n- Requirement: Config flag override — Scenario: missing config path errors\n\nExpected outputs:\n- BATS test verifying `--config` uses the provided file.\n- BATS test verifying `-c` missing path errors non-zero with clear message.\n\nValidation/tests:\n- `bats tests/trudger_test.bats` includes these scenarios.\n\nSuccess criteria:\n- Both OpenSpec scenarios have explicit BATS coverage.","acceptance_criteria":"Acceptance criteria: (1) BATS test asserts --config loads the provided file. (2) BATS test asserts missing -c/--config path errors non-zero with clear message.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T06:06:15.366718098Z","created_by":"mark","updated_at":"2026-01-30T01:46:49.067475870Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-htz","depends_on_id":"tr-2zt","type":"waits-for","created_at":"2026-01-29T06:06:15.401873864Z","created_by":"mark"},{"issue_id":"tr-htz","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:06:15.397076124Z","created_by":"mark"},{"issue_id":"tr-htz","depends_on_id":"tr-rg8","type":"waits-for","created_at":"2026-01-29T06:06:15.399675607Z","created_by":"mark"}]}
{"id":"tr-jyr","title":"Add config flag and sample configs for trudger","description":"Goals:\n- Provide a deterministic config override via `-c/--config` so tests and alternate workflows can bypass `~/.config/trudger.yml`.\n- Ship sample configuration files for legacy hooks and `bv --robot-triage` task selection.\n- Document flag usage and sample config locations.\n\nScope:\n- Code: `trudger` CLI flag parsing and config-path handling.\n- Docs: `README.md` updates.\n- Samples/tests: `sample_configuration/*.yml`, `tests/` updates.\n\nOpenSpec refs:\n- ADDED: Config flag override (Scenario: provided config path used; Scenario: missing config path errors)\n- ADDED: Sample config files (Scenario: sample configs available in repo)\n\nDependencies:\n- Depends on `update-trudger-config-bootstrap` and `refactor-trudger-config-and-docs` (see proposal).","acceptance_criteria":"Acceptance criteria: (1) -c/--config loads the provided file and ignores ~/.config/trudger.yml; missing path exits non-zero with a clear error. (2) sample_configuration/trudgeable-with-hooks.yml and sample_configuration/robot-triage.yml exist in the repo. (3) README documents the flag and sample config locations.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-29T06:02:53.980894557Z","created_by":"mark","updated_at":"2026-01-29T10:01:55.878731725Z","closed_at":"2026-01-29T10:01:55.878686569Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-jyr","depends_on_id":"tr-2mc","type":"waits-for","created_at":"2026-01-29T06:02:53.985076367Z","created_by":"mark"}],"comments":[{"id":1,"issue_id":"tr-jyr","author":"Mark Wotton","text":"Review complete: acceptance criteria verified (config override, sample configs present, README updated) and bats suite passed. Unable to close because dependency tr-2mc is still in_progress.","created_at":"2026-01-29T09:33:18Z"}]}
{"id":"tr-kxd","title":"Externalize task commands and bootstrap config","description":"Convert Trudger to a config-driven task runner: require config bootstrap, externalize task selection/show/update commands, and preserve hook-based completion/escalation without direct bd usage.\n\nScope\n- Add command expectations for next/show/update in config (commands.*), pass task id as first arg.\n- Ensure next_task exit semantics (1=done, other non-zero=error).\n- Use show output as free-form text for Codex, ignore update output.\n- Update samples/tests/README accordingly.","acceptance_criteria":"- Missing ~/.config/trudger.yml prints curl bootstrap instructions for sample configs and exits non-zero.\n- Trudger never invokes bd directly; all task ops run via configured commands.\n- commands.next_task exit 1 yields exit 0; other non-zero exits are errors.\n- commands.task_show output is passed to Codex unparsed; commands.task_update_in_progress output is ignored.\n- Sample configs and tests reflect new commands.* contract.\n- bats tests pass.","status":"closed","priority":2,"issue_type":"epic","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:21:15.567006719Z","created_by":"Mark Wotton","updated_at":"2026-01-29T03:27:11.790631824Z","closed_at":"2026-01-29T03:27:11.790567578Z","close_reason":"done","compaction_level":0}
{"id":"tr-kxd.1","title":"Update trudger to use commands.next_task with exit semantics","description":"Implements update-trudger-config-bootstrap: Requirement 'Task selection' scenarios (custom next-task, exit code 1 => exit 0, other non-zero => error). Ensure task id is passed as first arg to other commands/hooks. Update error handling for next_task exit codes.","acceptance_criteria":"- next_task_command is sourced from commands.next_task.\n- Exit code 1 from next_task exits 0.\n- Non-zero (non-1) from next_task exits non-zero with clear error.\n- First token of stdout is used as task id and is passed as arg1 to other commands/hooks.","status":"closed","priority":2,"issue_type":"task","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:21:27.458152850Z","created_by":"Mark Wotton","updated_at":"2026-01-29T02:00:13.889587947Z","closed_at":"2026-01-29T02:00:13.889525038Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-kxd.1","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-29T01:53:39Z","created_by":"import"}]}
{"id":"tr-kxd.2","title":"Add commands.task_show + commands.task_update_in_progress support","description":"Implements update-trudger-config-bootstrap: Requirements 'Task show command' and 'Task update command'. Replace direct bd show/update usage with configured commands. Show output is treated as free-form and passed to Codex without parsing; update output ignored.","acceptance_criteria":"- commands.task_show is required and executed as <command> <task_id> <extra args>.\n- commands.task_update_in_progress is required and executed before solve; output is ignored.\n- No bd invocations remain in trudger.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:13.087195272Z","created_by":"Mark Wotton","updated_at":"2026-01-29T02:28:57.484030745Z","closed_at":"2026-01-29T02:28:57.483986038Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.2","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:13.088373805Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.2","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.149182145Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.3","title":"Update sample configs for commands.*","description":"Implements update-trudger-config-bootstrap: Requirement 'Configured task commands' and task selection semantics. Add commands.next_task, commands.task_show, commands.task_update_in_progress to sample configs using bd/bv as appropriate. Ensure next_task exit behavior is consistent with config commands.","acceptance_criteria":"- sample_configuration/trudgeable-with-hooks.yml includes commands.next_task/task_show/task_update_in_progress using bd.\n- sample_configuration/robot-triage.yml includes commands.next_task/task_show/task_update_in_progress using bv/bd equivalents.\n- Comment headers explain command usage.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:23.974540484Z","created_by":"Mark Wotton","updated_at":"2026-01-29T03:15:39.294325776Z","closed_at":"2026-01-29T03:15:39.294280857Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.3","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:23.975704167Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.3","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.150495678Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.4","title":"Update tests for commands.* and next_task exit semantics","description":"Implements update-trudger-config-bootstrap scenarios for commands.task_show/task_update_in_progress and next_task exit codes. Update test fixtures to use configured commands and ensure failure paths are covered.","acceptance_criteria":"- tests use commands.* in config.\n- coverage for next_task exit 1 (idle) vs non-zero error.\n- tests assert that show output is passed to Codex and update output is ignored (as applicable).","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:38.877194587Z","created_by":"Mark Wotton","updated_at":"2026-01-29T03:23:30.828847112Z","closed_at":"2026-01-29T03:23:30.828785372Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:38.878375851Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.151578293Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.2","type":"blocks","created_at":"2026-01-28T09:23:47.152629887Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.3","type":"blocks","created_at":"2026-01-28T09:23:47.153677318Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.5","title":"Update README for commands.* contract","description":"Implements update-trudger-config-bootstrap documentation updates: describe commands.next_task/task_show/task_update_in_progress, exit code semantics, and requirement to pass task id as first arg.","acceptance_criteria":"- README documents commands.* keys, required status, and exit semantics.\n- Sample config snippets updated to match.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:51.062564796Z","created_by":"Mark Wotton","updated_at":"2026-01-29T03:36:39.685704837Z","closed_at":"2026-01-29T03:36:39.685659295Z","close_reason":"done","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:51.063699822Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd.2","type":"blocks","created_at":"2026-01-28T09:23:47.154769707Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd.3","type":"blocks","created_at":"2026-01-28T09:23:47.155819942Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-mh0","title":"Implement config bootstrap for trudger","description":"Implement update-trudger-config-bootstrap proposal once approved: require config file, print curl bootstrap, remove in-script defaults, update tests/docs.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T05:53:41.832324503Z","created_by":"Mark Wotton","updated_at":"2026-01-28T06:05:42.624502730Z","closed_at":"2026-01-28T06:05:42.624502730Z","close_reason":"Completed","compaction_level":0}
{"id":"tr-rg8","title":"Implement -c/--config override and missing-path error","description":"OpenSpec refs:\n- Requirement: Config flag override — Scenario: provided config path used\n- Requirement: Config flag override — Scenario: missing config path errors\n\nExpected outputs:\n- `trudger` accepts `-c/--config` and uses the provided path instead of `~/.config/trudger.yml`.\n- When the provided path is missing, the script exits non-zero with a clear error.\n- Default config path is ignored entirely when the flag is present.\n\nValidation/tests:\n- Covered by new/updated BATS cases in the \"Add BATS coverage for --config override\" task.\n\nSuccess criteria:\n- Flag behavior matches both OpenSpec scenarios.","acceptance_criteria":"Acceptance criteria: (1) -c/--config loads the provided file and ignores ~/.config/trudger.yml. (2) Missing config path exits non-zero with a clear error message.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T06:04:19.295557677Z","created_by":"mark","updated_at":"2026-01-29T10:06:42.192169662Z","closed_at":"2026-01-29T10:06:42.192092904Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-rg8","depends_on_id":"tr-jyr","type":"parent-child","created_at":"2026-01-29T06:04:19.299819864Z","created_by":"mark"}]}
{"id":"tr-syd","title":"Implement bd → br migration","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:31:47.493832783Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:45:55.959195754Z","closed_at":"2026-01-28T09:45:55.958945425Z","close_reason":"Completed","compaction_level":0}
{"id":"tr-u0t","title":"Extend tests for config, hook, and helper behavior","description":"OpenSpec refs:\n- Configuration loading, validation, parsing, and unknown keys scenarios\n- Hook execution semantics scenarios\n- Task selection scenarios\n- Review hook invocation and status verification scenarios\n\nExpected outputs:\n- BATS coverage for missing config, missing/empty fields, null fields, unknown key warnings, and missing `yq`.\n- BATS coverage for hook `$1` substitution vs argument-prepend behavior.\n- BATS coverage for task selection, review hook invocation, and missing-status error behavior.\n- Tests updated to use shared config and fixture helpers where applicable.\n\nValidation/tests:\n- Run BATS suite locally (or CI) and ensure it passes.\n\nSuccess criteria:\n- Each OpenSpec scenario above has at least one test, and the full test suite passes.","acceptance_criteria":"Acceptance criteria: (1) Every referenced scenario has at least one BATS test. (2) Test suite passes with updated config/fixture helpers.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:27:03.099886189Z","created_by":"mark","updated_at":"2026-01-29T09:26:43.365577130Z","closed_at":"2026-01-29T09:26:43.365515652Z","close_reason":"done","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"tr-u0t","depends_on_id":"tr-1ta","type":"waits-for","created_at":"2026-01-29T05:27:03.133086027Z","created_by":"mark"},{"issue_id":"tr-u0t","depends_on_id":"tr-2ef","type":"waits-for","created_at":"2026-01-29T05:27:03.131685925Z","created_by":"mark"},{"issue_id":"tr-u0t","depends_on_id":"tr-2mc","type":"parent-child","created_at":"2026-01-29T05:27:03.124885065Z","created_by":"mark"},{"issue_id":"tr-u0t","depends_on_id":"tr-2xy","type":"waits-for","created_at":"2026-01-29T05:27:03.134599917Z","created_by":"mark"},{"issue_id":"tr-u0t","depends_on_id":"tr-31i","type":"waits-for","created_at":"2026-01-29T05:27:03.136049596Z","created_by":"mark"},{"issue_id":"tr-u0t","depends_on_id":"tr-365","type":"waits-for","created_at":"2026-01-29T05:27:03.130134138Z","created_by":"mark"}]}

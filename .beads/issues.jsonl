{"id":"tr-0lw","title":"Add trudger automation script","description":"Goal: deliver a root-level ./trudger script that loops over ready trudgeable bd tasks and drives Codex solve+review sessions with deterministic task closure or requires-human escalation. Scope: prompt file presence checks, bd task selection, codex exec orchestration, bd state updates, and error handling. Out of scope: parallel task processing or general task runner framework.","acceptance_criteria":"- ./trudger is executable and starts without explicit shell invocation.\n- Missing ~/.codex/prompts/trudge or ~/.codex/prompts/trudge_review causes a clear startup error.\n- Lowest-priority ready trudgeable task is selected per loop; exits 0 when none remain.\n- Codex exec and resume are invoked with /prompt:trudge \u003cid\u003e and /prompt:trudge_review \u003cid\u003e.\n- On review success, bd task is closed and trudgeable removed; on requires-human, comment/notes updated, trudgeable removed, requires-human added.\n- If neither close nor requires-human occurs after review, script exits non-zero.","status":"closed","priority":2,"issue_type":"epic","owner":"mark@ram.local","created_at":"2026-01-26T03:25:20.188896676Z","created_by":"Mark","updated_at":"2026-01-26T04:10:30.211124533Z","closed_at":"2026-01-26T04:10:30.211124533Z","close_reason":"Closed"}
{"id":"tr-0lw.1","title":"Scaffold ./trudger and prompt file checks","description":"OpenSpec add-trudger requirements: (1) 'The system SHALL provide a root-level executable script named ...' Scenario: WHEN a user runs ./trudger THEN the script starts without requiring an explicit shell invocation. (2) 'The script SHALL verify that ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review exist...' Scenario: GIVEN missing prompt files WHEN ./trudger starts THEN it exits with a clear error indicating the missing path.","acceptance_criteria":"Outputs: root-level ./trudger script with executable permissions and usage header; startup check for ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review. Validation/tests: run ./trudger to confirm direct execution works; simulate missing prompt file(s) and confirm clear error message and non-zero exit. Success: script is executable and fails fast with explicit missing-path error.","status":"closed","priority":2,"issue_type":"task","owner":"mark@ram.local","created_at":"2026-01-26T03:25:27.533863764Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.356595171Z","closed_at":"2026-01-26T04:10:27.356595171Z","close_reason":"Closed","dependencies":[{"issue_id":"tr-0lw.1","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:27.534745566Z","created_by":"Mark"}]}
{"id":"tr-0lw.2","title":"Implement bd task selection loop","description":"OpenSpec requirement: The script SHALL select the lowest-priority ready bd task with the trudgeable label and process one task per outer loop iteration. Scenario: WHEN no ready tasks with label trudgeable are found THEN the script exits with status 0.","acceptance_criteria":"Outputs: bd query uses bd ready ordering for trudgeable tasks; lowest priority per bd ordering; loop handles one task at a time; exit 0 when none remain. Validation/tests: run against bd with zero trudgeable tasks to confirm exit 0; run with multiple trudgeable tasks to confirm bd ordering. Success: selection ordering matches bd ready output (open qualifies).","status":"closed","priority":2,"issue_type":"task","owner":"mark@ram.local","created_at":"2026-01-26T03:25:36.396621595Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.370709867Z","closed_at":"2026-01-26T04:10:27.370709867Z","close_reason":"Closed","dependencies":[{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:36.397481786Z","created_by":"Mark"},{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:36.398715608Z","created_by":"Mark"}]}
{"id":"tr-0lw.3","title":"Wire Codex exec + review prompts","description":"OpenSpec requirement: For each selected task, the script SHALL start a Codex exec session with /prompt:trudge \u003cbd-id\u003e and then resume the same session with /prompt:trudge_review \u003cbd-id\u003e. Scenario: WHEN a task is selected THEN the script invokes codex exec with /prompt:trudge \u003cbd-id\u003e AND codex exec resume --last with /prompt:trudge_review \u003cbd-id\u003e.","acceptance_criteria":"Outputs: codex exec invocation and resume of same session for review (resume --last or equivalent). Validation/tests: verify codex exec called with /prompt:trudge \u003cid\u003e and resume with /prompt:trudge_review \u003cid\u003e; failures abort immediately. Success: two-step Codex flow runs per task with correct prompts; non-zero on exec failure.","status":"closed","priority":2,"issue_type":"task","owner":"mark@ram.local","created_at":"2026-01-26T03:25:42.27131825Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.377459994Z","closed_at":"2026-01-26T04:10:27.377459994Z","close_reason":"Closed","dependencies":[{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:42.272414531Z","created_by":"Mark"},{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:42.273789681Z","created_by":"Mark"}]}
{"id":"tr-0lw.4","title":"Apply bd updates after Codex review","description":"OpenSpec requirements: (1) When review indicates acceptance, close bd task and remove trudgeable. Scenario: WHEN Codex review reports acceptance criteria satisfied THEN the bd task is closed and trudgeable removed. (2) When review indicates human input required, add bd comment, update notes, remove trudgeable, add requires-human. Scenario: WHEN Codex review reports that human input is required THEN task receives comment/notes update AND trudgeable removed AND requires-human added. (3) After review, verify task was closed or labeled requires-human (with trudgeable removed) and exit non-zero if neither. Scenario: WHEN review completes without closing or requires-human THEN script exits non-zero.","acceptance_criteria":"Outputs: on review completion, inspect bd task; if closed, remove trudgeable; if requires-human label present, add comment/notes, remove trudgeable, add requires-human. Validation/tests: simulate review success and verify bd task is closed; simulate requires-human response and verify labels/comment/notes; simulate missing close or requires-human and verify non-zero exit. Success: bd state reflects review outcome; script errors if neither close nor requires-human.","status":"closed","priority":2,"issue_type":"task","owner":"mark@ram.local","created_at":"2026-01-26T03:25:52.312225142Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.384901343Z","closed_at":"2026-01-26T04:10:27.384901343Z","close_reason":"Closed","dependencies":[{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:52.313358701Z","created_by":"Mark"},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:52.314904619Z","created_by":"Mark"},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:52.316193734Z","created_by":"Mark"},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:55:10.150781719Z","created_by":"Mark"}]}
{"id":"tr-0lw.5","title":"Validate trudger behavior with mock tasks","description":"OpenSpec scenarios covered: WHEN no ready trudgeable tasks are found THEN script exits 0; GIVEN missing prompt files WHEN ./trudger starts THEN clear error; WHEN task selected THEN codex exec and resume prompts invoked; WHEN review outcome applied THEN bd state updates or non-zero exit if missing.","acceptance_criteria":"Outputs: documented run evidence (logs/notes) for task selection, prompt checks, codex flow, and bd updates. Validation/tests: run a real codex session with a mock trudgeable task; confirm exit 0 when none remain; confirm missing prompts error; confirm bd updates on success/requires-human. Success: all scenarios in add-trudger change demonstrate expected behavior.","status":"closed","priority":2,"issue_type":"task","owner":"mark@ram.local","created_at":"2026-01-26T03:25:58.00061148Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.392355885Z","closed_at":"2026-01-26T04:10:27.392355885Z","close_reason":"Closed","dependencies":[{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:58.001959141Z","created_by":"Mark"},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:58.004012021Z","created_by":"Mark"},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:58.006003714Z","created_by":"Mark"},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:58.008106675Z","created_by":"Mark"},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.4","type":"blocks","created_at":"2026-01-26T03:25:58.010160509Z","created_by":"Mark"}]}

{"id":"tr-0lw","title":"Add trudger automation script","description":"Goal: deliver a root-level ./trudger script that loops over ready trudgeable bd tasks and drives Codex solve+review sessions with deterministic task closure or requires-human escalation. Scope: prompt file presence checks, bd task selection, codex exec orchestration, bd state updates, and error handling. Out of scope: parallel task processing or general task runner framework.","acceptance_criteria":"- ./trudger is executable and starts without explicit shell invocation.\n- Missing ~/.codex/prompts/trudge or ~/.codex/prompts/trudge_review causes a clear startup error.\n- Lowest-priority ready trudgeable task is selected per loop; exits 0 when none remain.\n- Codex exec and resume are invoked with /prompt:trudge <id> and /prompt:trudge_review <id>.\n- On review success, bd task is closed and trudgeable removed; on requires-human, comment/notes updated, trudgeable removed, requires-human added.\n- If neither close nor requires-human occurs after review, script exits non-zero.","status":"closed","priority":2,"issue_type":"epic","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:20.188896676Z","created_by":"Mark","updated_at":"2026-01-26T04:10:30.211124533Z","closed_at":"2026-01-26T04:10:30.211124533Z","close_reason":"Closed","compaction_level":0}
{"id":"tr-0lw.1","title":"Scaffold ./trudger and prompt file checks","description":"OpenSpec add-trudger requirements: (1) 'The system SHALL provide a root-level executable script named ...' Scenario: WHEN a user runs ./trudger THEN the script starts without requiring an explicit shell invocation. (2) 'The script SHALL verify that ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review exist...' Scenario: GIVEN missing prompt files WHEN ./trudger starts THEN it exits with a clear error indicating the missing path.","acceptance_criteria":"Outputs: root-level ./trudger script with executable permissions and usage header; startup check for ~/.codex/prompts/trudge and ~/.codex/prompts/trudge_review. Validation/tests: run ./trudger to confirm direct execution works; simulate missing prompt file(s) and confirm clear error message and non-zero exit. Success: script is executable and fails fast with explicit missing-path error.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:27.533863764Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.356595171Z","closed_at":"2026-01-26T04:10:27.356595171Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.1","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:27.534745566Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.2","title":"Implement bd task selection loop","description":"OpenSpec requirement: The script SHALL select the lowest-priority ready bd task with the trudgeable label and process one task per outer loop iteration. Scenario: WHEN no ready tasks with label trudgeable are found THEN the script exits with status 0.","acceptance_criteria":"Outputs: bd query uses bd ready ordering for trudgeable tasks; lowest priority per bd ordering; loop handles one task at a time; exit 0 when none remain. Validation/tests: run against bd with zero trudgeable tasks to confirm exit 0; run with multiple trudgeable tasks to confirm bd ordering. Success: selection ordering matches bd ready output (open qualifies).","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:36.396621595Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.370709867Z","closed_at":"2026-01-26T04:10:27.370709867Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:36.397481786Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.2","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:36.398715608Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.3","title":"Wire Codex exec + review prompts","description":"OpenSpec requirement: For each selected task, the script SHALL start a Codex exec session with /prompt:trudge <bd-id> and then resume the same session with /prompt:trudge_review <bd-id>. Scenario: WHEN a task is selected THEN the script invokes codex exec with /prompt:trudge <bd-id> AND codex exec resume --last with /prompt:trudge_review <bd-id>.","acceptance_criteria":"Outputs: codex exec invocation and resume of same session for review (resume --last or equivalent). Validation/tests: verify codex exec called with /prompt:trudge <id> and resume with /prompt:trudge_review <id>; failures abort immediately. Success: two-step Codex flow runs per task with correct prompts; non-zero on exec failure.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:42.271318250Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.377459994Z","closed_at":"2026-01-26T04:10:27.377459994Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:42.272414531Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.3","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:42.273789681Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.4","title":"Apply bd updates after Codex review","description":"OpenSpec requirements: (1) When review indicates acceptance, close bd task and remove trudgeable. Scenario: WHEN Codex review reports acceptance criteria satisfied THEN the bd task is closed and trudgeable removed. (2) When review indicates human input required, add bd comment, update notes, remove trudgeable, add requires-human. Scenario: WHEN Codex review reports that human input is required THEN task receives comment/notes update AND trudgeable removed AND requires-human added. (3) After review, verify task was closed or labeled requires-human (with trudgeable removed) and exit non-zero if neither. Scenario: WHEN review completes without closing or requires-human THEN script exits non-zero.","acceptance_criteria":"Outputs: on review completion, inspect bd task; if closed, remove trudgeable; if requires-human label present, add comment/notes, remove trudgeable, add requires-human. Validation/tests: simulate review success and verify bd task is closed; simulate requires-human response and verify labels/comment/notes; simulate missing close or requires-human and verify non-zero exit. Success: bd state reflects review outcome; script errors if neither close nor requires-human.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:52.312225142Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.384901343Z","closed_at":"2026-01-26T04:10:27.384901343Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:52.313358701Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:55:10.150781719Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:52.314904619Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.4","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:52.316193734Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-0lw.5","title":"Validate trudger behavior with mock tasks","description":"OpenSpec scenarios covered: WHEN no ready trudgeable tasks are found THEN script exits 0; GIVEN missing prompt files WHEN ./trudger starts THEN clear error; WHEN task selected THEN codex exec and resume prompts invoked; WHEN review outcome applied THEN bd state updates or non-zero exit if missing.","acceptance_criteria":"Outputs: documented run evidence (logs/notes) for task selection, prompt checks, codex flow, and bd updates. Validation/tests: run a real codex session with a mock trudgeable task; confirm exit 0 when none remain; confirm missing prompts error; confirm bd updates on success/requires-human. Success: all scenarios in add-trudger change demonstrate expected behavior.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mark@ram.local","created_at":"2026-01-26T03:25:58.000611480Z","created_by":"Mark","updated_at":"2026-01-26T04:10:27.392355885Z","closed_at":"2026-01-26T04:10:27.392355885Z","close_reason":"Closed","compaction_level":0,"dependencies":[{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw","type":"parent-child","created_at":"2026-01-26T03:25:58.001959141Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.1","type":"blocks","created_at":"2026-01-26T03:25:58.004012021Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.2","type":"blocks","created_at":"2026-01-26T03:25:58.006003714Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.3","type":"blocks","created_at":"2026-01-26T03:25:58.008106675Z","created_by":"Mark","metadata":"","thread_id":""},{"issue_id":"tr-0lw.5","depends_on_id":"tr-0lw.4","type":"blocks","created_at":"2026-01-26T03:25:58.010160509Z","created_by":"Mark","metadata":"","thread_id":""}]}
{"id":"tr-131","title":"Add trudger.yml configuration + hooks","description":"OpenSpec: openspec/changes/add-trudger-config\n\nGoals:\n- Read ~/.config/trudger.yml (warn if missing) to configure:\n  - Codex invocation command line\n  - Next-task selection command\n  - Optional hooks when a task completes or needs human approval\n  - Optional label names (trudgeable / requires-human) used only when hooks are not configured\n- Remove TRUDGER_* environment-variable configuration.\n\nScope:\n- Update ./trudger behavior to be config-driven.\n- Update tests to cover config + hooks.\n- Update docs as needed to explain configuration.\n\nOut of scope:\n- Changing bd or Codex behavior.\n- Changing prompt contents beyond existing $ARGUMENTS substitution.","acceptance_criteria":"- Config file: trudger reads ~/.config/trudger.yml on startup; if missing, prints a warning and continues with defaults.\n- No env config: TRUDGER_* environment variables are not used for configuration.\n- Task selection: uses configured next-task command (first whitespace-delimited token of stdout) or defaults to bd ready selection with optional trudgeable filtering.\n- Codex invocation: uses configured Codex command line for solve, and the same with `resume --last` for review.\n- Hooks: if configured, executes hooks as `<command> <task_id> <extra args...>` for completed and requires-human outcomes.\n- Labels optional: trudgeable/requires-human labels are configurable and optional; default label behavior applies only when hooks are not configured.\n- Verification: after review, trudger exits non-zero if neither closed nor requires-human condition is detected.\n- Validation: `bats tests/trudger_test.bats` passes; `openspec validate add-trudger-config --strict --no-interactive` passes.","status":"closed","priority":2,"issue_type":"epic","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.595618681Z","created_by":"Mark Wotton","updated_at":"2026-01-27T10:00:18.545671438Z","closed_at":"2026-01-27T10:00:18.545671438Z","close_reason":"Closed","compaction_level":0,"labels":["trudgeable"]}
{"id":"tr-131.1","title":"Load ~/.config/trudger.yml + defaults","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n    - Scenario: Config missing\n    - Scenario: Env vars ignored\n\nWork:\n- Define config keys + defaults needed to drive trudger behavior (Codex command, next-task command, hooks, labels, review loop limit, log path).\n- Implement reading ~/.config/trudger.yml at startup; if missing, emit a warning (stderr) and continue with defaults.\n- Implement YAML parsing sufficient for the chosen schema.\n\nExpected outputs:\n- ./trudger loads config and exposes values to the rest of the script.\n- Missing config produces a clear warning without failing.\n\nValidation/tests:\n- Add bats coverage for missing config warning + default behavior.\n\nSuccess:\n- `trudger` runs with no config (warns once) and preserves default behavior.","acceptance_criteria":"- Config loader exists and is used by ./trudger.\n- Missing ~/.config/trudger.yml prints a warning but exits 0 when no tasks.\n- Tests demonstrate warning + defaults.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.637292067Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:26:17.660059069Z","closed_at":"2026-01-28T02:26:17.660059069Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.1","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.638996521Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.2","title":"Remove TRUDGER_* configuration env vars","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n    - Scenario: Env vars ignored\n\nWork:\n- Remove TRUDGER_LOG / TRUDGER_NEXT_CMD / TRUDGER_REVIEW_LOOPS (and any other TRUDGER_* config) as configuration inputs.\n- Ensure any remaining TRUDGER_* values are internal-only state, not user config.\n\nExpected outputs:\n- ./trudger behavior is driven by config file defaults/values, not TRUDGER_* env vars.\n\nValidation/tests:\n- Add a bats test that sets TRUDGER_NEXT_CMD/TRUDGER_REVIEW_LOOPS and verifies behavior does not change unless config changes.\n\nSuccess:\n- Env vars no longer affect configuration.","acceptance_criteria":"- No TRUDGER_* env vars are read for configuration.\n- Tests cover at least one env var being ignored.","notes":"2026-01-28: Updated bats env-var test to set TRUDGER_REVIEW_LOOPS=0 alongside TRUDGER_NEXT_CMD; verified config ignores env vars. Ran: bats tests/trudger_test.bats, shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.692454937Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:44:21.885636925Z","closed_at":"2026-01-28T02:44:21.885636925Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.2","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.694228582Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.2","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.696546147Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.3","title":"Configure Codex invocation via config","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Codex prompt execution\n    - Scenario: Configured Codex command\n\nWork:\n- Read `codex_command` from config.\n- Use it for the solve step, and use the same command line with `resume --last` appended for the review step.\n\nExpected outputs:\n- ./trudger invokes Codex via the configured command string for both solve and review.\n\nValidation/tests:\n- Add bats coverage asserting the configured codex command is used (fixture codex log).\n\nSuccess:\n- Codex invocations match the configured command line for both phases.","acceptance_criteria":"- Configurable `codex_command` drives solve + review invocations.\n- Tests assert the command used.","notes":"2026-01-28: Verified codex_command from config drives solve and review (appends resume --last). Ran: bats tests/trudger_test.bats; TRUDGER_TEST_RUN_CODEX=1 bats -f 'uses configured codex command for solve and review' tests/trudger_test.bats; shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.750301428Z","created_by":"Mark Wotton","updated_at":"2026-01-28T02:58:16.300919686Z","closed_at":"2026-01-28T02:58:16.300919686Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.3","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.751906268Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.3","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.754284489Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.4","title":"Configure next-task selection via config","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Task selection\n    - Scenario: Custom next-task command\n\nWork:\n- Read `next_task_command` from config.\n- Execute it to select the next task id, using the first whitespace-delimited token of stdout.\n- If `next_task_command` is not configured, use the default bd-ready query, filtering by the configured trudgeable label when set.\n\nExpected outputs:\n- ./trudger selects tasks using the configured command and parsing rules.\n\nValidation/tests:\n- Add bats coverage for:\n  - Custom command returning an id\n  - Custom command returning empty -> exits 0 (no task)\n  - Default bd selection still works with label filtering\n\nSuccess:\n- Task selection follows config rules and is covered by tests.","acceptance_criteria":"- next-task selection uses `next_task_command` when set, otherwise defaults.\n- Tests cover parsing + fallback behavior.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.807784351Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:15:10.353568707Z","closed_at":"2026-01-28T03:15:10.353568707Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.4","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.809509331Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.4","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.811929987Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.5","title":"Add completion hook (on_completed) + fallback label behavior","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Task closure on success\n    - Scenario: Completion hook configured\n    - Scenario: No completion hook\n\nWork:\n- Add config for optional completion hook.\n- Execute the hook as `<command> <task_id> <extra args...>` when a task is closed.\n- If no completion hook is configured, remove the configured trudgeable label when it is set.\n\nExpected outputs:\n- ./trudger runs completion hook with task id as first argument.\n- Default label removal occurs only when hook is not configured.\n\nValidation/tests:\n- Add bats coverage using a fixture hook script to assert argv ordering.\n\nSuccess:\n- Closed tasks trigger the hook (or fallback label removal) per config.","acceptance_criteria":"- on_completed hook is invoked as `<cmd> <task_id> <extras>` when configured.\n- Fallback label removal works when hook is absent.\n- Tests cover both paths.","notes":"2026-01-28: Verified on_completed hook runs as <cmd> <task_id> <extras> and skips label removal; fallback label removal works when no hook. Ran: bats tests/trudger_test.bats; TRUDGER_TEST_RUN_CODEX=1 bats tests/trudger_test.bats; shellcheck trudger tests/fixtures/bin/*.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.867079473Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:25:19.055159742Z","closed_at":"2026-01-28T03:25:19.055159742Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.5","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.868861189Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.5","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.871236880Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.6","title":"Add requires-human hook (on_requires_human) + optional labels","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Requires-human escalation\n    - Scenario: Requires-human hook configured\n    - Scenario: No requires-human hook\n\nWork:\n- Add config for optional requires-human hook.\n- Execute the hook as `<command> <task_id> <extra args...>` when requires-human is detected.\n- If no hook is configured, apply label updates using configured label names (both optional).\n\nExpected outputs:\n- ./trudger can operate with labels disabled (no trudgeable/requires-human labels configured) when hooks are configured.\n\nValidation/tests:\n- Add bats coverage for:\n  - Hook invocation and argv ordering\n  - Label fallback behavior when hook is absent\n  - Behavior when label names are unset/empty\n\nSuccess:\n- Requires-human handling matches the configured hook/label strategy and is tested.","acceptance_criteria":"- on_requires_human hook is invoked as `<cmd> <task_id> <extras>` when configured.\n- Label fallback behavior works when hook is absent.\n- Labels can be disabled via config when hooks are present.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.925853480Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:31:59.775714186Z","closed_at":"2026-01-28T03:31:59.775714186Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.6","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.927792355Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.6","depends_on_id":"tr-131.1","type":"blocks","created_at":"2026-01-27T09:26:35.930450739Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.7","title":"Update bats tests for config-driven behavior","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file (scenarios: Config missing, Env vars ignored)\n  - Requirement: Task selection (scenario: Custom next-task command)\n  - Requirement: Codex prompt execution (scenario: Configured Codex command)\n  - Requirement: Task closure on success (scenarios: Completion hook configured / No completion hook)\n  - Requirement: Requires-human escalation (scenarios: Requires-human hook configured / No requires-human hook)\n  - Requirement: Codex update verification (scenario: Missing update is an error)\n\nWork:\n- Update `tests/trudger_test.bats` and fixtures to use config file instead of TRUDGER_* env vars.\n- Add new fixtures/scripts as needed to assert hook argv ordering and next-task command behavior.\n\nExpected outputs:\n- New/updated bats tests covering config loading, codex command, task selection, hooks, and verification.\n\nValidation/tests:\n- `bats tests/trudger_test.bats`\n\nSuccess:\n- Test suite passes and covers the new config-driven acceptance criteria.","acceptance_criteria":"- Bats tests updated/added to cover config + hooks.\n- All tests pass locally.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:35.984747492Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:36:57.719086798Z","closed_at":"2026-01-28T03:36:57.719086798Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.7","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:35.986638153Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.2","type":"blocks","created_at":"2026-01-27T09:26:35.989317341Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.3","type":"blocks","created_at":"2026-01-27T09:26:35.991873342Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.4","type":"blocks","created_at":"2026-01-27T09:26:35.994566446Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.5","type":"blocks","created_at":"2026-01-27T09:26:35.997203746Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.7","depends_on_id":"tr-131.6","type":"blocks","created_at":"2026-01-27T09:26:35.999708932Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-131.8","title":"Run quality gates + update docs","description":"OpenSpec refs:\n- openspec/changes/add-trudger-config/specs/trudger/spec.md\n  - Requirement: Trudger configuration file\n\nWork:\n- Update README/install guidance to document ~/.config/trudger.yml and available config keys.\n- Run validation commands and record results in the PR/notes.\n\nExpected outputs:\n- Docs clearly describe configuration and defaults.\n\nValidation/tests:\n- `openspec validate add-trudger-config --strict --no-interactive`\n- `bats tests/trudger_test.bats`\n\nSuccess:\n- Validation passes; docs match implemented behavior.","acceptance_criteria":"- Docs updated to describe config and defaults.\n- openspec + bats validation passes.","notes":"Validation:\\n- openspec validate add-trudger-config --strict --no-interactive (pass)\\n- bats tests/trudger_test.bats (pass)","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-27T09:26:36.054519306Z","created_by":"Mark Wotton","updated_at":"2026-01-28T03:41:19.360356219Z","closed_at":"2026-01-28T03:41:19.360356219Z","close_reason":"Completed","compaction_level":0,"dependencies":[{"issue_id":"tr-131.8","depends_on_id":"tr-131","type":"parent-child","created_at":"2026-01-27T09:26:36.056245843Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-131.8","depends_on_id":"tr-131.7","type":"blocks","created_at":"2026-01-27T09:26:36.058726235Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-kxd","title":"Externalize task commands and bootstrap config","description":"Convert Trudger to a config-driven task runner: require config bootstrap, externalize task selection/show/update commands, and preserve hook-based completion/escalation without direct bd usage.\n\nScope\n- Add command expectations for next/show/update in config (commands.*), pass task id as first arg.\n- Ensure next_task exit semantics (1=done, other non-zero=error).\n- Use show output as free-form text for Codex, ignore update output.\n- Update samples/tests/README accordingly.","acceptance_criteria":"- Missing ~/.config/trudger.yml prints curl bootstrap instructions for sample configs and exits non-zero.\n- Trudger never invokes bd directly; all task ops run via configured commands.\n- commands.next_task exit 1 yields exit 0; other non-zero exits are errors.\n- commands.task_show output is passed to Codex unparsed; commands.task_update_in_progress output is ignored.\n- Sample configs and tests reflect new commands.* contract.\n- bats tests pass.","status":"open","priority":2,"issue_type":"epic","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:21:15.567006719Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:21:15.567006719Z","compaction_level":0}
{"id":"tr-kxd.1","title":"Update trudger to use commands.next_task with exit semantics","description":"Implements update-trudger-config-bootstrap: Requirement 'Task selection' scenarios (custom next-task, exit code 1 => exit 0, other non-zero => error). Ensure task id is passed as first arg to other commands/hooks. Update error handling for next_task exit codes.","acceptance_criteria":"- next_task_command is sourced from commands.next_task.\n- Exit code 1 from next_task exits 0.\n- Non-zero (non-1) from next_task exits non-zero with clear error.\n- First token of stdout is used as task id and is passed as arg1 to other commands/hooks.","status":"open","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:21:27.458152850Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:21:27.458152850Z","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.1","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:21:27.459351536Z","created_by":"Mark Wotton","metadata":"","thread_id":""}]}
{"id":"tr-kxd.2","title":"Add commands.task_show + commands.task_update_in_progress support","description":"Implements update-trudger-config-bootstrap: Requirements 'Task show command' and 'Task update command'. Replace direct bd show/update usage with configured commands. Show output is treated as free-form and passed to Codex without parsing; update output ignored.","acceptance_criteria":"- commands.task_show is required and executed as <command> <task_id> <extra args>.\n- commands.task_update_in_progress is required and executed before solve; output is ignored.\n- No bd invocations remain in trudger.","status":"open","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:13.087195272Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:22:13.087195272Z","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.2","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:13.088373805Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.2","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.149182145Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.3","title":"Update sample configs for commands.*","description":"Implements update-trudger-config-bootstrap: Requirement 'Configured task commands' and task selection semantics. Add commands.next_task, commands.task_show, commands.task_update_in_progress to sample configs using bd/bv as appropriate. Ensure next_task exit behavior is consistent with config commands.","acceptance_criteria":"- sample_configuration/trudgeable-with-hooks.yml includes commands.next_task/task_show/task_update_in_progress using bd.\n- sample_configuration/robot-triage.yml includes commands.next_task/task_show/task_update_in_progress using bv/bd equivalents.\n- Comment headers explain command usage.","status":"open","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:23.974540484Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:22:23.974540484Z","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.3","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:23.975704167Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.3","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.150495678Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.4","title":"Update tests for commands.* and next_task exit semantics","description":"Implements update-trudger-config-bootstrap scenarios for commands.task_show/task_update_in_progress and next_task exit codes. Update test fixtures to use configured commands and ensure failure paths are covered.","acceptance_criteria":"- tests use commands.* in config.\n- coverage for next_task exit 1 (idle) vs non-zero error.\n- tests assert that show output is passed to Codex and update output is ignored (as applicable).","status":"open","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:38.877194587Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:22:38.877194587Z","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:38.878375851Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.1","type":"blocks","created_at":"2026-01-28T09:23:47.151578293Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.2","type":"blocks","created_at":"2026-01-28T09:23:47.152629887Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.4","depends_on_id":"tr-kxd.3","type":"blocks","created_at":"2026-01-28T09:23:47.153677318Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-kxd.5","title":"Update README for commands.* contract","description":"Implements update-trudger-config-bootstrap documentation updates: describe commands.next_task/task_show/task_update_in_progress, exit code semantics, and requirement to pass task id as first arg.","acceptance_criteria":"- README documents commands.* keys, required status, and exit semantics.\n- Sample config snippets updated to match.","status":"open","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:22:51.062564796Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:22:51.062564796Z","compaction_level":0,"dependencies":[{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd","type":"parent-child","created_at":"2026-01-28T09:22:51.063699822Z","created_by":"Mark Wotton","metadata":"","thread_id":""},{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd.2","type":"blocks","created_at":"2026-01-28T09:23:47.154769707Z","created_by":"import","metadata":"","thread_id":""},{"issue_id":"tr-kxd.5","depends_on_id":"tr-kxd.3","type":"blocks","created_at":"2026-01-28T09:23:47.155819942Z","created_by":"import","metadata":"","thread_id":""}]}
{"id":"tr-mh0","title":"Implement config bootstrap for trudger","description":"Implement update-trudger-config-bootstrap proposal once approved: require config file, print curl bootstrap, remove in-script defaults, update tests/docs.","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T05:53:41.832324503Z","created_by":"Mark Wotton","updated_at":"2026-01-28T06:05:42.624502730Z","closed_at":"2026-01-28T06:05:42.624502730Z","close_reason":"Completed","compaction_level":0}
{"id":"tr-syd","title":"Implement bd â†’ br migration","status":"closed","priority":2,"issue_type":"task","assignee":"","owner":"mwotton@gmail.com","created_at":"2026-01-28T09:31:47.493832783Z","created_by":"Mark Wotton","updated_at":"2026-01-28T09:45:55.959195754Z","closed_at":"2026-01-28T09:45:55.958945425Z","close_reason":"Completed","compaction_level":0}

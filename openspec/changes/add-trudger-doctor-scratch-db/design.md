## Context
Doctor checks need a safe place to run task system commands. We want a scratch database that can be freely mutated and regenerated by a setup command without impacting real work, using an implementation-defined temporary location.

## Goals / Non-Goals
- Goals:
  - Provide a scratch setup hook for doctor mode.
  - Ensure doctor mode supplies a scratch directory path to that hook (via env var).
  - Ensure the setup hook runs from the invocation working directory (so it can use local context).
  - Ensure subsequent doctor checks run from the scratch directory as working directory.
  - Make it easy for sample configs to reinitialize using local context.
- Non-Goals:
  - Implement the full set of doctor checks (tracked separately).
  - Enforce a specific task database implementation.
  - Automate migration for existing configs.

## Decisions
- Add a new hook `hooks.on_doctor_setup` executed by `trudger doctor`.
- `trudger doctor` creates a temporary scratch directory and runs the setup hook from the invocation working directory, setting `TRUDGER_DOCTOR_SCRATCH_DIR` to the scratch path.
- Doctor checks (implemented separately) run from the scratch directory as working directory.
- The hook runs via the same command execution mechanism as other hooks; `TRUDGER_CONFIG_PATH` is set, `TRUDGER_DOCTOR_SCRATCH_DIR` is set, and `TRUDGER_TASK_*`, `TRUDGER_PROMPT`, and `TRUDGER_REVIEW_PROMPT` are unset; non-zero exit aborts doctor mode.
- Doctor mode cleans up the temporary scratch directory on both success and failure.

## Risks / Trade-offs
- Introducing a new hook can confuse existing configs; we will require it only when `trudger doctor` runs.
- Scratch cleanup might fail; doctor should only remove paths it created.

## Migration Plan
- Update sample configs to include `hooks.on_doctor_setup` that rebuilds a scratch DB using local context (working directory = scratch dir).
- Add docs covering the doctor hook and env vars.
- Implement a minimal doctor entrypoint that runs the hook; full checks follow in the next change.

## Open Questions
- None.
